(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[6],{56:function(e,t,r){"use strict";r.r(t);var a=r(41),s=r.n(a),n=r(42),c=r(16),o=r(13),u=r(17),i=r(0),p=r(2),j=r(52);j.a.initializeApp({apiKey:"AIzaSyCw_nFjxtWvJ_mv9BrYljIt-YSNwg6Wk7Q",authDomain:"react-app-9336c.firebaseapp.com",databaseURL:"https://react-app-9336c-default-rtdb.firebaseio.com",projectId:"react-app-9336c",storageBucket:"react-app-9336c.appspot.com",messagingSenderId:"782715162088",appId:"1:782715162088:web:2b24e1829504fa1dfba85d"});var b=j.a.firestore(),l=r(10),d=r(1),m=Object(p.g)((function(e){var t=e.history,r=Object(i.useContext)(l.a).setUser,a={username:"",password:""},p=Object(i.useState)(a),j=Object(u.a)(p,2),m=j[0],h=j[1],O=function(e){var t=e.target,r=t.name,a=t.value;h(Object(o.a)(Object(o.a)({},m),{},Object(c.a)({},r,a)))},x=function(){var e=Object(n.a)(s.a.mark((function e(n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.collection("users").where("username","==",m.username).where("password","==",m.password).get();case 4:c=e.sent,c.empty?(alert("User Not found"),h(a)):(c.forEach((function(e){e.exists&&(h(a),r(Object(o.a)({isLoggedIn:!0},e.data())))})),t.push("/profile")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("ERR on Login:-",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)("h5",{children:"Login "}),Object(d.jsxs)("form",{autoComplete:"off",onSubmit:x,children:[Object(d.jsx)("label",{htmlFor:"username",children:"User Name:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{value:m.username,name:"username",onChange:O,placeholder:"Enter Username",required:!0}),Object(d.jsx)("br",{}),Object(d.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"text",value:m.password,name:"password",placeholder:"Enter Password",required:!0,onChange:O}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"submit",value:"Log In"})]})]})}));t.default=Object(p.g)((function(e){var t=e.history,r=Object(i.useContext)(l.a),a=r.user,p=r.setUser,j={username:"",password:""},h=Object(i.useState)(j),O=Object(u.a)(h,2),x=O[0],f=O[1],g=function(e){var t=e.target,r=t.name,a=t.value;f(Object(o.a)(Object(o.a)({},x),{},Object(c.a)({},r,a)))},w=function(){var e=Object(n.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b.collection("users").where("username","==",x.username).get();case 3:r=e.sent,r.empty?v({username:x.username,password:x.password}):(alert("Seems to be an exising user, Please Login!"),f(j));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function v(e){return y.apply(this,arguments)}function y(){return(y=Object(n.a)(s.a.mark((function e(r){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.collection("users").add(r);case 3:return a=e.sent,n=a.id,e.next=7,b.collection("users").where("username","==",x.username).where("password","==",x.password).get();case 7:e.sent.forEach((function(e){f(j),p(Object(o.a)({isLoggedIn:!0,id:n},e.data()))})),t.push("/profile"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("ERR on Register: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(d.jsx)(d.Fragment,{children:a.isLoggedIn?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["Welcome, ",a.username]}),Object(d.jsx)("button",{onClick:function(){return p({isLoggedIn:!1})},children:"Logout"})]}):Object(d.jsxs)("div",{className:"signin__wrapper",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h5",{children:"Register "}),Object(d.jsxs)("form",{autoComplete:"off",onSubmit:w,children:[Object(d.jsx)("label",{htmlFor:"username",children:"User Name:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{value:x.username,name:"username",onChange:g,placeholder:"Enter Username",required:!0}),Object(d.jsx)("br",{}),Object(d.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"text",value:x.password,name:"password",required:!0,placeholder:"Enter Password",onChange:g}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"submit",value:"Register"})]})]}),Object(d.jsx)(m,{})]})})}))}}]);
//# sourceMappingURL=6.98f1f9b1.chunk.js.map